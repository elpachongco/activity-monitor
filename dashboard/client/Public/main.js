(()=>{"use strict";function e(e){return e.reduce(((e,t)=>e+t))}function t(e,t,a=new Date){let n=!1,r=!1,l={from:null,to:null},s=0;for(let c of e.actStart){let e=new Date(c);if(e>=t&&!n&&(l.from=s,n=!n),n&&e<=a&&(l.to=s,r=!r),r&&e>a)break;s++}return l}function a(e){return React.createElement("div",{className:"heatmap_square",value:e.value})}class n extends React.Component{render(){let e=[];for(let t=0;t<this.props.squares;t++)e.push(React.createElement(a,{value:t}));return React.createElement("div",{className:"heatmap"},e)}}class r extends React.Component{constructor(e){super(e),this.canvasRef=React.createRef()}createGraph(){new Chart(this.canvasRef.current,{type:"line",data:{labels:["January","February","March","April","May","June"],datasets:[{label:"My First dataset",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[0,10,5,2,20,30,45]}]},options:{}})}componentDidMount(){this.createGraph()}render(){return React.createElement("div",{className:"lineGraph"},React.createElement("canvas",{id:"graphCanvas",ref:this.canvasRef,width:this.props.width,height:this.props.height}))}}class l extends React.Component{componentDidMount(){}render(){return React.createElement("div",{className:"dashboard"},React.createElement(n,{squares:25}),React.createElement(r,{width:20,height:20}))}}let s=new URL("http://localhost:5000/data/");s.searchParams.set("period","all"),fetch(s.toString()).then((e=>e.json())).then((e=>function(e){let t={actDuration:e.actStart.map(((t,a)=>{let n=new Date(t);return(new Date(e.actEnd[a]).valueOf()-n.valueOf())/1e3-e.inactDuration[a]}))};return Object.assign(e,t)}(e))).then((a=>function(a){let n=a.actStart,r=a.actDuration,s=a.inactDuration;const c={labels:null,data:null},o=Object.assign({},c);[c.labels,c.data]=(()=>{let e,t=function(e){const t=Math.abs(60);let a=[],n=(new Date).setHours(0,0,0,0),r=60*t*1e3;for(let e=0;e<1440;e+=60){let e=new Date(n).toLocaleTimeString();a.push(e),n+=r}return a}(),a=Array(24).fill(0,0,24),l=0;for(let t of n)e=new Date(t).getHours(),a[e]+=r[l],l++;return[t,a]})(),[o.labels,o.data]=(()=>{let e,t=Array(7).fill(0),a=0;for(let l of n)e=new Date(l).getDay(),t[e]+=r[a],a++;return[["sun","mon","tue","wed","thu","fri","sat"],t]})();const u=(()=>{let n=t(a,function(e=new Date){let t=e.setHours(0,0,0,0);return new Date(t)}()),[l,c]=[n.from,n.to];if(null==l||null==c)return 0;let o=r.slice(l,c+1),u=s.slice(l,c+1);return e(o)/e(u)*100})(),i=(()=>{let{from:e,to:l}=(()=>{let e=(new Date).getDate(),n=(new Date).setDate(e-10);return t(a,new Date(n))})();if(null==e||null==l)return;let c=[],o=[],u=[],i=0;for(let t of n.slice(e,l+1)){let a=new Date(t).toDateString(),n=e+i;0===i&&(u.push(a),c.push(r[n]),o.push(s[n])),a===u[u.length-1]?(c[c.length-1]+=r[n],o[o.length-1]+=s[n]):(c.push(r[n]),o.push(s[n]),u.push(a)),i++}return{acts:c,inacts:o,labels:u}})();console.log(c),console.log(o),console.log(u-100),console.log(i);const h={hourlyActivity:c,dailyActivity:o,actVsInact:u,actInact10d:i};ReactDOM.render(React.createElement(l,{data:h}),document.getElementById("root"))}(a)))})();